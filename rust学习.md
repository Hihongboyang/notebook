# rustå­¦ä¹ 

## hello world

```rust
fn main()
{
    println!("hello world !!")
}
```

è¿è¡Œç¨‹åº

```shell
cargo run
```





## å˜é‡

```rust
fn main()
{
    let x = 5; // ä¸å¯å˜çš„
    x = 3; // ä¼šæŠ¥é”™
    
    let mut x = 5; // å˜é‡å¯å˜äº†
}
```

å¸¸é‡

å¸¸é‡åœ¨ç»‘å®šä¸€ä¸ªå€¼åä¹Ÿæ˜¯ä¸å¯å˜çš„ã€‚ä¸ä¸å¯å˜çš„å˜é‡çš„åŒºåˆ«æ˜¯ï¼š

- ä¸èƒ½ä½¿ç”¨mutï¼Œå¸¸é‡æ°¸è¿œä¸å¯å˜ã€‚
- å£°æ˜å¸¸é‡ä½¿ç”¨constå…³é”®å­—ï¼Œç±»å‹å¿…é¡»è¢«æ ‡æ³¨
- å¸¸é‡å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸå†…è¿›è¡Œå£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸ
- å¸¸é‡åªå¯ä»¥ç»‘å®šåˆ°å¸¸é‡è¡¨è¾¾å¼ï¼Œæ— æ³•ç»‘å®šåˆ°å‡½æ•°çš„è°ƒç”¨ç»“æœæˆ–è€…åªèƒ½åœ¨è¿è¡Œæ—¶æ‰èƒ½è®¡ç®—å‡º

```rust
const MAX_POINTS: u32 = 100_000;
```



shadowing

å¯ä»¥ä½¿ç”¨ç›¸åŒçš„åå­—å£°æ˜æ–°çš„å˜é‡ï¼Œæ–°çš„å˜é‡å°±ä¼šshadowï¼ˆéšè—ï¼‰ä¹‹å‰å£°æ˜çš„åŒåå˜é‡ï¼Œåœ¨åç»­çš„ä»£ç ä¸­è¿™ä¸ªå˜é‡åå°±æ˜¯æ–°å˜é‡ã€‚

````rust
fn main(){
    let spaces = "    ";
    let spaces = spaces.len();  // å¯ä»¥æ”¹å˜å˜é‡çš„ç±»å‹
}
````



æ•°æ®ç±»å‹

æ ‡é‡ç±»å‹+å¤åˆç±»å‹

é€šå¸¸ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­å‡ºç±»å‹ã€‚ä½†æ˜¯å¤æ‚æƒ…å†µéœ€è¦è‡ªå·±æŒ‡å®šç±»æ–°ã€‚

```rust
let guess:u32 = "42".parse().expect("Not a number");
```

æ ‡é‡ç±»å‹

1. æ•´æ•°ç±»å‹
2. æµ®ç‚¹ç±»å‹
3. å¸ƒå°”ç±»å‹
4. å­—ç¬¦ç±»å‹

æ•´æ•°ç±»å‹

| ä½æ•° | æœ‰ç¬¦å· | æ— ç¬¦å· |
| ---- | ------ | ------ |
| 8    | i8     | u8     |
| 16   | i16    | u16    |
| 32   | i32    | u32    |
| 64   | i64    | u64    |
| 128  | i128   | u128   |
| arch | isize  | usize  |

isize å’Œusizeæ˜¯æ ¹æ®ç³»ç»Ÿæ¶æ„èµ°çš„ï¼Œ64ä½ç³»ç»Ÿå°±æ˜¯64ä½ã€‚

æ•´æ•°çš„æº¢å‡ºï¼Œæ•´æ•°æº¢å‡ºåï¼Œruståœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è¿è¡Œæ—¶ä¸è¿‡ä¼šï¼Œè€Œä¸”æº¢å‡ºåä¼šå¾ªç¯257=ã€‹1



æµ®ç‚¹ç±»å‹

æµ®ç‚¹ç±»å‹çš„é»˜è®¤ç±»å‹æ˜¯ f64

```rust
fn main(){
    let some = 1.0 + 3.5; // f64
}
```



å­—ç¬¦ç±»å‹

å­—ç¬¦ç±»å‹ç”¨æ¥æè¿°ä½†ä¸ªå­—ç¬¦ï¼Œå­—ç¬¦ç±»å‹çš„å­—é¢å€¼ä½¿ç”¨å•å¼•å·ã€‚å ç”¨4ä¸ªå­—èŠ‚çš„å¤§å°ã€‚å¯ä»¥å­˜å‚¨å¾ˆå¤šå€¼ï¼Œç”šè‡³å¯ä»¥å­˜å‚¨emojiè¡¨æƒ…ã€‚

````rust
fn mian(){
    let x = 'z';
    let y: char = 'ï¿¥'ï¼›
    let z = 'ğŸ˜€'ï¼›
}
````



å¤åˆç±»å‹tuple

åˆ›å»ºtupleï¼Œåœ¨å°æ‹¬å·é‡Œï¼Œå°†å€¼ç”¨é€—å·åˆ†å¼€ã€‚tupleä¸­çš„æ¯ä¸€ä¸ªä½ç½®éƒ½å¯¹åº”ä¸€ä¸ªç±»å‹ï¼Œtupleä¸­å„ä¸ªå…ƒç´ ç±»å‹å¯ä»¥ä¸åŒã€‚

è·å–tupleä¸­çš„å€¼ï¼Œ1.ç±»ä¼¼äºpythonä¸­çš„åºåˆ—è§£åŒ… 2. ç›´æ¥è·å¾—æŒ‡å®šä½ç½®çš„å€¼ï¼Œç‚¹è¡¨è®°æ³•ï¼Œåæ¥å…ƒç´ çš„ç´¢å¼•å·ã€‚

````rust
fn main(){
    let some:(i32, f64, u8) = (50, 1.4, 3);
    
    let (x, y, z) = some;
    
    println!("{},{},{}", some.0, some.1, some.2);
}
````



æ•°ç»„

æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»æ˜¯ç›¸åŒçš„ã€‚ æ•°ç»„çš„é•¿åº¦ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œå£°æ˜ä¹‹åä¸èƒ½æ”¹å˜ã€‚æ•°ç»„æ˜¯stackä¸Šåˆ†é…çš„å•ä¸ªå— çš„å†…å­˜ã€‚

```rust
fn main(){
    let a[i32; 5] = [1,2,3,4,5];  // a[i32; 5] [ç±»å‹ï¼› é•¿åº¦]
    
    let a = [3; 5]; // a == [3,3,3,3,3] åˆå§‹åŒ–çš„æ–¹æ³•
    
    let first = a[0]; // è®¿é—®æ•°ç»„å…ƒç´ 
}
```



å‡½æ•°

å£°æ˜å‡½æ•°ä½¿ç”¨`fn`å…³é”®å­—

```rust
fn main()
{ }
```



å‡½æ•°ä½“ä¸­çš„è¯­å¥å’Œè¡¨è¾¾å¼

1. å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—è¯­å¥ç»„æˆï¼Œå¯é€‰çš„ç”±ä¸€ä¸ªè¡¨è¾¾å¼ç»“æŸã€‚
2. rustæ˜¯ä¸€ä¸ªåŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ã€‚
3. è¯­å¥æ˜¯æ‰§è¡Œä¸€äº›åŠ¨ä½œçš„æŒ‡ä»¤ã€‚
4. è¡¨è¾¾å¼ä¼šè®¡ç®—äº§ç”Ÿä¸€ä¸ªå€¼ã€‚

```rust
fn main(){
    let x = 5; // è¯­å¥ï¼Œä»–æ²¡æœ‰ä¸€ä¸ªè¿”å›å€¼ã€‚
    let y = 6+7; // 6+7 æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»–ä¼šäº§ç”Ÿä¸€ä¸ªè¿”å›å€¼
    
    let y = {
        let x = 1;
        x + 3
    }; // è¿™ä¸ªå—ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…¶ä¸­x+3çš„å€¼ä¼šä½œä¸ºè¿”å›å€¼ã€‚
    
    let y = {
        let x = 1;
        x + 3ï¼› // å½“æœ‰x+3; è¿™ä¸ªå—å°±ä¸ä¼šæœ‰è¿”å›å€¼äº†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªç©ºçš„tupleï¼Œ
    }; 
}
```



å‡½æ•°çš„è¿”å›å€¼

- åœ¨`->`ç¬¦å·åé¢å£°æ˜å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œä½†æ˜¯ä¸å¯ä»¥ä¸ºè¿”å›å€¼å‘½åã€‚
- rustä¸­ï¼Œé»˜è®¤è¿”å›å€¼æ˜¯å‡½æ•°ä½“ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚
- å¦‚æœè¦æå‰è¿”å›å€¼ï¼Œéœ€è¦ç”¨returnå…³é”®å­—ï¼ŒæŒ‡å®šä¸€ä¸ªå€¼ã€‚

```rust
fn five() -> i32
{
    5 // æ²¡æœ‰åˆ†å·ï¼Œé‡‡ç”¨é»˜è®¤çš„è¿”å›å½¢å¼
}

fn main(){
    let x = five();
}
```



ifè¡¨è¾¾å¼

```rust
if 
else if 
else
```



- ifè¡¨è¾¾å¼çš„æ¡ä»¶å¿…é¡»æ˜¯boolç±»å‹çš„ã€‚ä¸èƒ½æ˜¯ä¸€ä¸ªå¯ä»¥åˆ¤å®šä¸ºçœŸçš„å€¼
- ifè¡¨è¾¾å¼ä¸­ï¼Œä¸æ¡ä»¶ç›¸å…³è”çš„ä»£ç å—å«åšåˆ†æ”¯ï¼ˆarmï¼‰
- å¯é€‰æ‹©åœ¨åé¢åŠ ä¸Šelseè¡¨è¾¾å¼

if ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼

```rust
fn main()
{
    let condition = true;
    let number = if condition { 5 } else { 6 }; // æ³¨æ„è¿™ä¸¤ä¸ªå—ä¸­çš„æ•°å­—ï¼Œå¯ä»¥è¢«è¿”å›
    println!("the value of number is: {}", number);
}
```



å¾ªç¯

loop 

æ‰§è¡Œæ— é™å¾ªç¯ï¼Œåœ¨å†…éƒ¨åˆ¤æ–­è¦ä¸è¦ç»§ç»­æ‰§è¡Œã€‚

```rust
fn main()
{
    let mut counter = 0;
    let result = loop {
        counter += 1;
        
        if counter == 10 {
            break counter * 2;
        }
    };
    println!("the result is: {}", result);
}
```



while å¾ªç¯

å…ˆåˆ¤æ–­æ¡ä»¶å†æ‰§è¡Œå¾ªç¯

```rust
fn main()
{
    let mut number = 3;
    while number != 0 {
        println!("{}!", number);
        number = number - 1;
    }
    println!("some !");
}
```

for å¾ªç¯

```rust
fn main() {
    let a = [10 ,20 ,30 ,40 ,50];
    
    for element in a.iter() {
        println!("the value is: {}", element);
    }
    
    for number in (1..4).rev() {  // python ä¸­Rangeçš„æ–¹å¼
        println!("{}!", number);
    }
}
```



rustä¸­çš„æ‰€æœ‰æƒ

ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒï¼Ÿ

åœ¨å…¶ä»–çš„è¯­è¨€ä¸­ï¼Œéƒ½éœ€è¦åœ¨è¿è¡Œæ—¶å¯¹è®¡ç®—æœºçš„å†…å­˜è¿›è¡Œç®¡ç†ã€‚

æœ‰äº›è¯­è¨€æœ‰åƒåœ¾å›æ”¶æœºåˆ¶æ¥å¤„ç†ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚

æœ‰äº›è¯­è¨€ï¼Œéœ€è¦æ˜¾å¼çš„åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚



rusté‡‡ç”¨å¦ä¸€ç§æ–¹å¼æ¥ç®¡ç†å†…å­˜ï¼šæ‰€æœ‰æƒã€‚å†…å­˜ç®¡ç†çš„å·¥ä½œæ˜¯åœ¨ç¼–è¯‘æ—¶å®Œæˆçš„ã€‚

æ‰€æœ‰æƒè§„åˆ™ï¼š

- æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯è¯¥å€¼çš„æ‰€æœ‰è€…
- æ¯ä¸ªå€¼åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…
- å½“æ‰€æœ‰è€…è¶…å‡ºä½œç”¨åŸŸï¼ˆscopeï¼‰æ—¶ï¼Œè¯¥å€¼å°†è¢«åˆ é™¤ã€‚

ä½œç”¨åŸŸ

```rust
fn main(){
    // s is not available
    let s = 6; // s is available
    // you can start operating the s
}// overflow the scope of sï¼Œ s is disabled
```

ä»¥å­—ç¬¦ä¸²ä¸ºä¾‹å­ï¼Œè®²è§£æ‰€æœ‰æƒçš„æ¦‚å¿µ

å­—ç¬¦ä¸²ç±»å‹æœ‰ä¸¤ç§å½¢å¼ï¼š

1. å­—ç¬¦ä¸²å­—é¢å€¼ï¼šç¨‹åºé‡Œæ‰‹å†™çš„é‚£äº›å­—ç¬¦ä¸²å€¼ã€‚ä»–ä»¬æ˜¯ä¸å¯å˜çš„ã€‚è¿™äº›å€¼æ˜¯ç›´æ¥å†™åœ¨ç¨‹åºä»£ç é‡Œçš„ï¼Œå­˜å‚¨åœ¨æ ˆå†…å­˜ä¸Šã€‚
2. Stringï¼šåœ¨heapä¸Šåˆ†é…çš„å­˜å‚¨ç©ºé—´ï¼Œèƒ½å¤Ÿå­˜å‚¨åœ¨ç¼–è¯‘æ—¶æœªçŸ¥æ•°é‡çš„æ–‡æœ¬ã€‚

åˆ›å»ºstringç±»å‹çš„å€¼

å¯ä»¥ä½¿ç”¨fromå‡½æ•°ä»å­—ç¬¦ä¸²å­—é¢å€¼åˆ›å»ºå‡ºstringç±»å‹ã€‚`let s = String::from("hello");`

````rust
fn main(){
    let mut s = String::from("hello");
    s.push_str(",World");  // modify string
    println!("{}", s);
} // è¶…å‡ºä½œç”¨åŸŸèŒƒå›´ï¼Œä¼šå°†sçš„å†…å­˜é‡Šæ”¾
````

å¯¹äºæŸä¸ªå€¼æ¥è¯´ï¼Œå½“æ‹¥æœ‰å®ƒçš„å˜é‡è¶…å‡ºä»–çš„ä½œç”¨åŸŸèŒƒå›´æ—¶ï¼Œå†…å­˜ä¼šç«‹å³è‡ªåŠ¨çš„äº¤è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚

ä»ä¸Šé¢æ‰€æœ‰æƒçš„è§„åˆ™å’Œå˜é‡çš„ä½œç”¨åŸŸä¸¤ä¸ªæ–¹é¢æ¥è®²ï¼Œå½“æˆ‘ä»¬å°†ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ï¼Œæ•°æ®çš„æ‰€æœ‰æƒå°±å‘ç”Ÿäº†å˜æ›´ï¼Œè€Œå½“è¿™ä¸¤ä¸ªå˜é‡è¶…å‡ºäº†ä½œç”¨åŸŸçš„èŒƒå›´åï¼Œéƒ½åº”å½“è¢«é”€æ¯ã€‚è€Œæ­¤æ—¶å°±å­˜åœ¨é—®é¢˜äº†ï¼Œå› ä¸ºä¸¤ä¸ªå˜é‡çš„å®é™…å­˜å‚¨çš„æ˜¯ç›¸åŒçš„å€¼ï¼Œä¼šä¸ä¼šå°†ç›¸åŒçš„å†…å­˜é‡Šæ”¾ä¸¤æ¬¡ã€‚çœ‹å¦‚ä¸‹çš„ä¾‹å­

```rust
fn main(){
    let x = 5;
    let y = x;  // æŒ‰ç…§è§„åˆ™ï¼Œ5çš„æ‰€æœ‰æƒäº¤ç»™äº†y
    println!("{} {}", x, y); // å¦‚æœæŒ‰ç…§ä¹‹å‰çš„é€»è¾‘ï¼Œxï¼Œyéƒ½éœ€è¦é‡Šæ”¾ã€‚
}
```

é’ˆå¯¹å˜é‡å’Œæ•°æ®ï¼ˆå¦‚5ï¼‰ä¹‹é—´çš„äº¤äº’ï¼Œrustè®¾è®¡äº†ä¸€ä¸ª**ç§»åŠ¨ï¼ˆmoveï¼‰**çš„æ¦‚å¿µã€‚

åœ¨è¿™é‡Œæ˜¯å°†æ•°æ®çš„æ‰€æœ‰æƒäº¤ç»™äº†yï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§æµ…æ‹·è´ï¼Œåªæ˜¯æ‹·è´äº†æ•°æ®çš„å¼•ç”¨ã€‚ä¸è¿‡å¦‚5æˆ–è€…å­—ç¬¦ä¸²å­—é¢å€¼è¿™ç§ç®€å•ç›´æ¥çš„æ•°æ®ç±»å‹ï¼Œæµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«ä¸å¤§ï¼Œå› ä¸ºè¿™äº›æ•°æ®æœ¬èº«å°±åœ¨æ•°æ®æ ˆä¸­ï¼Œåªæ˜¯é‡æ–°åŠ å…¥äº†ä¸€éã€‚

å¦‚æœæ˜¯å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚Stringç±»å‹å’Œæ•°ç»„ç±»å‹ç­‰ï¼Œä»–ä»¬çš„æ•°æ®æ˜¯æ”¾åœ¨å †å†…å­˜ä¸­çš„ï¼Œæ ˆä¸­åªå­˜æ”¾äº†æ•°æ®çš„å¼•ç”¨ã€‚ä»–ä»¬çš„æ‰€æœ‰æƒç§»åŠ¨ï¼ˆmoveï¼‰æ˜¯å¦ä¸€ç§å½¢å¼äº†ã€‚

ä»¥å­—ç¬¦ä¸²Stringç±»å‹ä¸¾ä¾‹ï¼š

```rust
let s1 = String::from("hello");
let s2 = s1;
```

ä¸€ä¸ª String ç±»å‹ç”±3éƒ¨åˆ†ç»„æˆ

| name                                                         | value      |
| ------------------------------------------------------------ | ---------- |
| ptrï¼ˆæŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²å†…å®¹çš„å†…å­˜æŒ‡é’ˆï¼‰                          | æŒ‡å‘å †å†…å­˜ |
| æ‹·è´len ï¼ˆä¸€ä¸ªé•¿åº¦ï¼Œå­˜æ”¾å­—ç¬¦ä¸²å†…å®¹æ‰€éœ€çš„å­—èŠ‚æ•°ï¼‰             | 5          |
| capacityï¼ˆä¸€ä¸ªå®¹é‡ï¼Œstringä»æ“ä½œç³»ç»Ÿæ€»å…±è·å¾—å†…å­˜çš„æ€»å­—èŠ‚æ•°ï¼‰ | 5          |

è¿™ä¸€éƒ¨åˆ†å­˜æ”¾äºæ ˆå†…å­˜ä¸­ã€‚

å †å†…å­˜æ‹·è´

| index | value |
| ----- | ----- |
| 0     | h     |
| 1     | e     |
| 2     | l     |
| 3     | l     |
| 4     | o     |

åœ¨rustä¸­å½“s2 = s1æ—¶ï¼Œå¹¶æ²¡æœ‰å¤åˆ¶å †å†…å­˜ä¸­çš„ä¸œè¥¿ï¼Œè€Œåªæ˜¯å¤åˆ¶äº†å¼•ç”¨ï¼ŒåŒæ—¶rustä½¿**s1çš„å¼•ç”¨å¤±æ•ˆ**ã€‚æ‰€ä»¥åœ¨è¶…å‡ºä½œç”¨åŸŸé‡Šæ”¾å†…å­˜æ—¶ï¼Œå°±ä¸ç”¨å†é‡Šæ”¾s1äº†ã€‚

åŒæ—¶å¦‚æœåœ¨ä¹‹åçš„ä»£ç ä¸­ä½¿ç”¨å¤±æ•ˆçš„s1å˜é‡ï¼Œæ˜¯ä¼šå¯¼è‡´é”™è¯¯çš„ã€‚

```rust
fn main(){
	let s1 = String::from("hello");
	let s2 = s1;
    println!("{} {}", s1, s2); // Error: borrow of moved value: 's1'
}
```

è¿™é‡Œéšå«çš„ä¸€ä¸ªè®¾è®¡åŸåˆ™æ˜¯ï¼šrustä¸ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®çš„æ·±æ‹·è´ï¼Œéƒ½æ˜¯é»˜è®¤å»ºç«‹çš„æµ…æ‹·è´ã€‚

å½“æˆ‘ä»¬éœ€è¦æ·±æ‹·è´çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨å…‹éš†ï¼ˆcloneï¼‰è¿™ä¸ªæ–¹æ³•

```rust
fn main(){
    let x = 5;
    let y = x.clone(); // æ·±æ‹·è´
    println!("{} {}", x, y);
}
```



äºæ­¤å¯¹åº”ï¼Œåœ¨æ ˆä¸Šçš„æ•°æ®çš„æ‹·è´å« å¤åˆ¶ã€‚å¹¶æœ‰ä¸€ä¸ªå«`Copy trait`çš„æ–¹æ³•ã€‚

- `Copy trait`, å¯ä»¥ç”¨äºåƒæ•´æ•°è¿™æ ·å®Œå…¨å­˜æ”¾åœ¨stackä¸Šé¢çš„ç±»å‹
- å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº†copyè¿™ä¸ªtraitï¼Œé‚£ä¹ˆæ—§çš„å˜é‡åœ¨èµ‹å€¼åä»ç„¶å¯ç”¨
- å¦‚æœä¸€ä¸ªç±»å‹æˆ–è€…è¯¥ç±»å‹çš„ä¸€éƒ¨åˆ†å®ç°äº†`Drop trait`ï¼Œé‚£ä¹ˆrustä¸å…è®¸ä»–å†å®ç°`Copy trait`

ä¸€äº›æ‹¥æœ‰Copy trait çš„ç±»å‹

- ä»»ä½•ç®€å•æ ‡é‡çš„ç»„åˆç±»å‹éƒ½å¯ä»¥æ˜¯copyçš„
- ä»»ä½•éœ€è¦åˆ†é…å†…å­˜æˆ–æŸç§èµ„æºçš„éƒ½ä¸æ˜¯copyçš„
- ä¸€äº›æ‹¥æœ‰copy traitçš„ç±»å‹
  - æ‰€æœ‰çš„æ•´æ•°ç±»å‹
  - bool
  - char
  - æ‰€æœ‰æµ®ç‚¹ç±»å‹
  - tupleç±»å‹ï¼Œå¦‚æœtupleä¸­æ‰€æœ‰çš„å­—æ®µéƒ½æ˜¯å¯ä»¥copyçš„ï¼Œå¦åˆ™ä¸è¡Œã€‚



æ‰€æœ‰æƒå’Œå‡½æ•°

å°†å€¼ä¼ é€’ç»™å‡½æ•°å’Œå°†å€¼ä¼ é€’ç»™å˜é‡ï¼Œäº§ç”Ÿçš„æ•ˆæœæ˜¯ç›¸ä¼¼çš„ã€‚ä¼ é€’ç»™å‡½æ•°åªä¼šå‘ç”Ÿä¸¤ç§æƒ…å†µï¼šç§»åŠ¨æˆ–è€…å¤åˆ¶ã€‚

```rust
fn main(){
    let s = String::from("Hello World");
    take_ownership(s); // å°†sçš„æ‰€æœ‰æƒè½¬å‘å‡½æ•°å†…éƒ¨äº†, åœ¨å¤–éƒ¨å°±ä¸èƒ½è®¿é—®äº†
    let x = 5;
    makes_copy(x);  // ç”±äºç±»å‹çš„åŸå› ï¼Œxåœ¨å¤–é¢è¿˜æ˜¯å¯ä»¥è®¿é—®çš„
    println!("x: {}", x);
}

fn take_ownership(some_string: String)
{
    println!("{}", some_string)
}

fn makes_copy(some_number: i32)
{
    println!("{}", some_number);
}

```

è¿”å›å€¼å’Œä½œç”¨åŸŸå’Œæ‰€æœ‰æƒ

å‡½æ•°åœ¨è¿”å›å€¼çš„è¿‡ç¨‹ä¸­ï¼ŒåŒæ ·ä¹Ÿä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„è½¬ç§»

ä¸€ä¸ªå˜é‡çš„æ‰€æœ‰æƒæ€»æ˜¯éµå¾ªåŒæ ·çš„æ¨¡å¼ï¼š

- æŠŠä¸€ä¸ªå€¼èµ‹ç»™å…¶ä»–å˜é‡æ—¶å°±ä¼šå‘ç”Ÿç§»åŠ¨
- å½“ä¸€ä¸ªåŒ…å«heapæ•°æ®çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒçš„å€¼å°±ä¼šè¢«dropå‡½æ•°æ¸…ç†ï¼Œé™¤éæ•°æ®çš„æ‰€æœ‰æƒè½¬ç§»åˆ°å¦ä¸€ä¸ªå˜é‡ä¸Šã€‚

```rust
fn main(){
    let s1 = gives_ownership();
    let s2 = String::from("hello");
    let s3 = takes_and_gives_back(s2);
    // è¿™é‡Œs2ä¸å†å¯ç”¨
}// s1 s2 s3 éƒ½è¢«é”€æ¯

fn gives_ownership()->String{
    let some_string = String::from("hello");
    some_string  // some_string çš„æ‰€æœ‰æƒè¿”å›åˆ°mainå‡½æ•°äº†
}

fn takes_and_gives_back(a_string: String)->String{
    a_string  // s2 çš„æ‰€æœ‰æƒä¼ é€’è¿›æ¥ï¼Œç„¶ååˆè¢«ä¼ é€’å‡ºå»ã€‚
}
```

å¦‚ä½•è®©å‡½æ•°ä½¿ç”¨æŸä¸ªå€¼ï¼Œä½†ä¸è·å¾—å…¶æ‰€æœ‰æƒï¼Ÿ

ä½¿ç”¨ å¼•ç”¨æˆ–è€…å€Ÿç”¨ã€‚ä»€ä¹ˆæ˜¯å¼•ç”¨ï¼Œå°†å‚æ•°çš„ç±»å‹å˜ä¸º &String è€Œä¸æ˜¯String

&ç¬¦å·å°±è¡¨ç¤ºå¼•ç”¨ï¼šå…è®¸ä½ å¼•ç”¨æŸäº›å€¼è€Œä¸å–å¾—å…¶æ‰€æœ‰æƒ

````rust
fn main(){
    let s1 = String::from("Hello");
    let len = calculate_length(&s1);
    
    println!("the length of '{}' is {}", s1, len);
}

fn calvulate_length(s: &String)->usize{
    s.len() // è¶…å‡ºä½œç”¨åŸŸ ä½†å¹¶ä¸æ¸…ç†å­˜å‚¨ç©ºé—´ï¼Œå› ä¸ºå¹¶æœªè·å¾—æ‰€æœ‰æƒ
}
````

æ˜¯å¦èƒ½å¤Ÿä¿®æ”¹å€Ÿç”¨ï¼Ÿ ä¸è¡Œçš„ï¼Œå’Œå˜é‡ä¸€æ ·ï¼Œé»˜è®¤éƒ½æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ã€‚é™¤éæˆ‘ä»¬å°†ä»–è®¾ç½®ä¸ºå¯å˜çš„mutã€‚

````rust
fn main(){
    let mut s1 = String::from("Hello");
    let len = calculate_length(&mut s1);
    
    println!("the length of '{}' is {}", s1, len);
}

fn calvulate_length(s: &mut String)->usize{
    s.push_str(", world");
    s.len() // è¶…å‡ºä½œç”¨åŸŸ ä½†å¹¶ä¸æ¸…ç†å­˜å‚¨ç©ºé—´ï¼Œå› ä¸ºå¹¶æœªè·å¾—æ‰€æœ‰æƒ
}
````

å¯å˜å¼•ç”¨çš„é‡è¦é™åˆ¶æ˜¯ï¼šåœ¨ç‰¹å®šçš„ä½œç”¨åŸŸå†…ï¼Œå¯¹æŸä¸€å—æ•°æ®ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯åœ¨ç¼–è¯‘æ—¶é˜²æ­¢æ•°æ®ç«äº‰ã€‚

ä»¥ä¸‹ä¸‰ç§è¡Œä¸ºä¸‹ä¼šå‘ç”Ÿæ•°æ®ç«äº‰ï¼š

- ä¸¤ä¸ªæˆ–å¤šä¸ªæŒ‡é’ˆåŒæ—¶è®¿é—®åŒä¸€ä¸ªæ•°æ®ã€‚
- è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡é’ˆç”¨äºå†™å…¥æ•°æ®
- æ²¡æœ‰ä½¿ç”¨ä»»ä½•æœºåˆ¶æ¥åŒæ­¥å¯¹æ•°æ®çš„è®¿é—®



å¯ä»¥é€šè¿‡åˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œæ¥å…è®¸éåŒæ—¶çš„åˆ›å»ºå¤šä¸ªå¯å˜å¼•ç”¨

````rust
fn main(){
    let mut s = String::from("Hello");
    {
        let s1 = &mut s;
    }
    let s2 = &mut s; // è™½ç„¶æœ‰ä¸¤ä¸ªå¯å˜å¼•ç”¨ï¼Œä½†æ˜¯ä»–ä»¬çš„ä½œç”¨åŸŸä¸é‡å 
}
````

å¦ä¸€ä¸ªé™åˆ¶ï¼šä¸å¯ä»¥åŒæ—¶æ‹¥æœ‰ä¸€ä¸ªå¯å˜å’Œä¸€ä¸ªä¸å¯å˜çš„å¼•ç”¨ã€‚å¤šä¸ªä¸å¯å˜å¼•ç”¨æ˜¯å¯ä»¥çš„ã€‚

å¼•ç”¨æœ‰å¼•å‘æ‚¬ç©ºæŒ‡é’ˆçš„é—®é¢˜

```rust
fn main(){
    let r = dangle();
}

fn dangle() -> &String{
    let s = String::from("hello");
    &s  // è¿”å›å¼•ç”¨ï¼Œä½†æ˜¯såœ¨å‡½æ•°ç»“æŸçš„æ—¶å€™å°±è¦è¢«é”€æ¯äº†ï¼Œè¿™ä¸ªå¼•ç”¨ä¹Ÿä¼šå¤±æ•ˆã€‚  è¿™é‡Œä¼šå¼•å…¥ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œä¹‹åä¼šè®²
}
```



å­—ç¬¦ä¸²åˆ‡ç‰‡

å­—ç¬¦ä¸²åˆ‡ç‰‡æ˜¯æŒ‡å­—ç¬¦ä¸²ä¸­ä¸€éƒ¨åˆ†å†…å®¹çš„å¼•ç”¨ã€‚

å½¢å¼ï¼š [å¼€å§‹ç´¢å¼•..ç»“æŸç´¢å¼•]

- å¼€å§‹ç´¢å¼•å°±æ˜¯åˆ‡ç‰‡èµ·å§‹ä½ç½®çš„ç´¢å¼•å€¼
- ç»“æŸç´¢å¼•æ˜¯åˆ‡ç‰‡ç»ˆæ­¢ä½ç½®çš„ä¸‹ä¸€ä¸ªç´¢å¼•å€¼

```rust
fn main(){
    let s = String::from("Hello world");
    
    let hello = &s[0..5];
    let world = &s[6..11];
    println!("{}, {}", hello, world);
}
```

å­—ç¬¦ä¸²å­—é¢å€¼å°±æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå­—ç¬¦ä¸²å­—é¢å€¼è¢«ç›´æ¥å­˜å‚¨åœ¨äºŒè¿›åˆ¶ç¨‹åºä¸­ã€‚

```rust
fn main(){
    let s = "Hello world";  // sæ˜¯&str å­—ç¬¦ä¸²åˆ‡ç‰‡ç±»å‹çš„
    println!("{}", s);
}
```

å°†å­—ç¬¦ä¸²åˆ‡ç‰‡ä½œä¸ºå‚æ•°ä¼ é€’

````rust
fn first_word(s: &String) -> &str{}
// æ”¹ä¸º
fn first_word(s: &str) -> &str{}
````

ä½¿ç”¨æ–¹æ³• ï¼š1. ä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚2. ä½¿ç”¨Stringï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„Stringåˆ‡ç‰‡æ¥è°ƒç”¨è¯¥å‡½æ•°ã€‚

å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡æ¥ä»£æ›¿å­—ç¬¦ä¸²ä¼šä½¿æˆ‘ä»¬çš„apiæ›´åŠ é€šç”¨ï¼Œä¸”ä¸ä¼šæŸå¤±ä»»ä½•åŠŸèƒ½ã€‚

````rust
fn main() {
    let my_string = String::from("Hello world");
    let wordIndex = first_world(&my_string[..]);  // è¿™é‡Œçš„..
    
    let my_string_literal = "hello_world";
    let wordIndex = first_world(my_string_literal);
}

fn first_world(s: &str) -> &str{ // é‡‡ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡
    let bytes = s.as_bytes();
    for(i, &item) in bytes.iter().enumerate()
    {
        if item == b' '
        {
            return &s[..];
        }
    }
    &s[..]
}

````



## `rust`ä¸­çš„`struct`

ä»€ä¹ˆæ˜¯structï¼Ÿ ç»“æ„ä½“ï¼Œè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œä¸ºç›¸å…³è”çš„å€¼å‘½åï¼Œæ‰“åŒ…=>æœ‰æ„ä¹‰çš„ç»„åˆ

### å®šä¹‰struct

```rust
struct User{  // ä½¿ç”¨structå…³é”®å­—
    username: String, // å­—æ®µåç§°å’Œç±»å‹
    email: String, 
    sign_in_count: u64,
    active: bool, // æœ€åçš„å­—æ®µä¹Ÿè¦æœ‰é€—å·
}
```

### å®ä¾‹åŒ–struct

æƒ³è¦ä½¿ç”¨å¿…é¡»å…ˆå®ä¾‹åŒ–ã€‚

- ä¸ºæ¯ä¸ªå­—æ®µæŒ‡å®šå…·ä½“çš„å€¼
- æ— éœ€æŒ‰å£°æ˜é¡ºåºè¿›è¡ŒæŒ‡å®š

```rust
struct User{
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}

fn main(){
    let user1 = User{
        email: String::from("abc@123.com"),
        username: String::from("Nikky"),
        active: true,
        sign_in_count: 556,  // åˆå§‹åŒ–æ—¶è¦ç»™æ¯ä¸ªæˆå‘˜éƒ½èµ‹å€¼
    };
}
```

### è·å–structé‡Œé¢çš„æŸä¸ªå€¼

ä½¿ç”¨ç‚¹ æ ‡è®°æ³•

```rust
let mut user1 = User{  // å¦‚æœä½¿ç”¨mutæ ‡è®°ï¼Œæ ‡è®°structæ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆæ•´ä¸ªstructçš„å­—æ®µéƒ½æ˜¯å¯å˜çš„
        email: String::from("abc@123.com"),
        usernameL: String::from("Nikky"),
        active: true,
        sign_in_count: 556,
};
user1.email = String::from("anotheremail@123.com");
```



### structä½œä¸ºå‡½æ•°è¿”å›å€¼

å°†structä½œä¸ºå‡½æ•°æœ€åçš„è¡¨è¾¾å¼ï¼Œå°±å¯ä»¥å°†structä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ä½¿ç”¨ã€‚

### åˆå§‹åŒ–å­—æ®µçš„ç®€å†™

å½“å­—æ®µåä¸å­—æ®µå€¼å¯¹åº”çš„å˜é‡åç›¸åŒæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å­—æ®µåˆå§‹åŒ–ç®€å†™çš„æ–¹å¼ï¼š

```rust
struct User{
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}

fn build_user(email: String, username: String)->User{
    User {
        email, // ä½¿ç”¨äº†ç®€å†™çš„æ–¹å¼
        username,  // ä½¿ç”¨äº†ç®€å†™çš„æ–¹å¼
        active: true,
        sign_in_count: 0,
    }
}
```

### struct ä¸­çš„æ›´æ–°è¯­æ³•

å½“æƒ³è¦åŸºäºä¸€ä¸ªstructå®ä¾‹åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨structæ›´æ–°è¯­æ³•ï¼š

````rust
let user2 = User{
    email: String::from("anotheremail@123.com")
    username: String::from("anothername"),
    active: user1.active,  // å¦‚æœä¸ä½¿ç”¨æ›´æ–°çš„è¯­æ³•ï¼Œéœ€è¦ä»ä¹‹å‰çš„structæŒ‡å®šå€¼
    sign_in_count: user1.sign_in_count,
};

let user2 = User{
    email: String::from("anotheremail@123.com")
    username: String::from("anothername"),
    ..user1  // structæ›´æ–°è¯­æ³•ï¼Œä½¿ç”¨ä¸¤ä¸ª..ã€‚å‰©ä¸‹çš„å€¼ä½¿ç”¨user1çš„å€¼
};
````

### tuple struct

å®šä¹‰ç±»ä¼¼tupleçš„structã€‚éœ€æ±‚ï¼š

1. tuple structæ•´ä½“æœ‰ä¸ªåå­—ï¼Œä½†é‡Œé¢çš„å…ƒç´ æ²¡æœ‰åå­—
2. é€‚ç”¨èŒƒå›´ï¼šæƒ³ç»™æ•´ä¸ªtupleèµ·åï¼Œå¹¶è®©å®ƒä¸åŒäºå…¶ä»–tupleï¼Œè€Œä¸”åˆä¸éœ€è¦ç»™æ¯ä¸ªå…ƒç´ èµ·åã€‚

å®šä¹‰tuple structï¼š struct + åç§°(å…ƒç´ ç±»å‹)

````rust
struct Color(i32, i32, i32);
struct Point(i32, i32, i32);
let black = Color(0,0,0);
let origin = Point(0,0,0);
````



### æ²¡æœ‰ä»»ä½•å­—æ®µçš„struct (unit-Like Struct)

å¯ä»¥å®šä¹‰æ²¡æœ‰ä»»ä½•å­—æ®µçš„structï¼Œå«åšunit-like struct

é€‚ç”¨äºéœ€è¦åœ¨æŸä¸ªç±»å‹ä¸Šå®ç°æŸä¸ªtraitï¼Œä½†æ˜¯åœ¨é‡Œé¢åˆæ²¡æœ‰æƒ³è¦å­˜å‚¨çš„æ•°æ®ã€‚

### structæ•°æ®çš„æ‰€æœ‰æƒ

````rust
struct User{
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}
````

ä¸Šè¿°ç»“æ„ä½“çš„å­—æ®µä½¿ç”¨äº†Stringè€Œä¸æ˜¯&strï¼Œå¹¶ä¸”u64ç­‰åŸºç¡€ç±»å‹

- æ‰€ä»¥è¯¥structå®ä¾‹æ‹¥æœ‰å…¶æ‰€æœ‰çš„æ•°æ®çš„æ‰€æœ‰æƒ
- åªè¦structçš„å®ä¾‹æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆé‡Œé¢çš„å­—æ®µæ•°æ®ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚

structé‡Œé¢ä¹Ÿå¯ä»¥å­˜æ”¾å¼•ç”¨ï¼Œä½†è¿™éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼ˆä»¥åå†è®²ï¼‰

- ç”Ÿå‘½å‘¨æœŸä¿è¯åªè¦structå®ä¾‹æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆé‡Œé¢çš„å¼•ç”¨ä¹Ÿæ˜¯æœ‰æ•ˆçš„
- å¦‚æœstructé‡Œé¢å­˜å‚¨å¼•ç”¨ï¼Œè€Œä¸ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸï¼Œå°±ä¼šæŠ¥é”™ã€‚

### ä½¿ç”¨structçš„ä¾‹å­

å‡å¦‚è¦è®¡ç®—ä¸€ä¸ªçŸ©å½¢çš„é¢ç§¯ï¼Œæˆ‘ä»¬éœ€è¦é•¿å®½è¿›è¡Œè®¡ç®—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°ã€‚

```rust
fn main()
{
    let w = 30;
    let l = 50;
    prinfln!("{}", area(w, l));
}

fn area(wigth: u32, length: u32)
{
    wigth * length
}
```

ä¸Šé¢çš„ä¾‹å­çš„é—®é¢˜æ˜¯çŸ©å½¢çš„é•¿å®½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å°†ä»–ä»¬è”ç³»èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯ä¸ç»Ÿä¸€ã€‚

ä½¿ç”¨å…ƒç»„å¯ä»¥å°†ä¸¤ä¸ªå‚æ•°ç»„åˆèµ·æ¥ï¼Œä½†æ˜¯å®ƒçš„é—®é¢˜çš„æ˜¯å“ªä¸ªæ˜¯é•¿ï¼Œå“ªä¸ªæ˜¯å®½ï¼Œå®¹æ˜“æ··æ·†

````rust
fn main()
{
    let rect = (30, 50);

    println!("{}", area(rect));
}

fn area(dim: (u32, u32)) ->u32
{
    dim.0 * dim.1
}
````

ä½¿ç”¨structå¯¹æ¯ä¸ªå‚æ•°èµ·åå­—

```rust
struct Rectangle
{
    width: u32,
    length: u32,
} // ä½¿ç”¨ç»“æ„ä½“æ¥ä¿å­˜é•¿å®½çš„æ•°æ®

fn main()
{
    let rect = Rectangle{
        width: 30,
        length: 50,
    };
    println!("{}", area(&rect));  // ä¿ç•™äº†æ‰€æœ‰æƒ
    println!("{}", rect); // è¿™é‡Œæ‰“å°ä¼šæŠ¥é”™
}

fn area(rect: &Rectangle) ->u32
{
    rect.width * rect.length
}

```

### structçš„è°ƒè¯•æ¨¡å¼

å¦‚ä¸Šé¢ä¾‹å­æ‰€ç¤º

````rust
println!("{}", rect);
````

è¿™é‡Œç›´æ¥æ‰“å°ä¸€ä¸ªstructæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè¿™ä¸ªstructå¹¶æ²¡æœ‰å®ç°`std::fmt::Display`è¿™ä¸ªæ¥å£ï¼Œç±»ä¼¼äºpythonä¸­æ²¡æœ‰å®ç°`__str__`è¿™ä¸ªæ–¹æ³•ï¼Œæ— æ³•æ‰“å°å‡ºstructä¸­å…·ä½“çš„æ•°æ®ã€‚

ä¿®æ”¹æç¤ºå¯ä»¥ä½¿ç”¨`{:?}`è¿›è¡Œæ ¼å¼åŒ–

```rust
println!("{:?}", rect);
println!("{:#?}", rect);
```

ä½†æ˜¯è¿™æ ·ä¹Ÿä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰å¼€å¯structçš„debugæ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„å¼€å¯è¿™ä¸ªåŠŸèƒ½

```rust
#[derive(Debug)]
struct Rectangle
{
    width: u32,
    length: u32,
} 
```

å…¶ä¸­deriveæ˜¯ä¸€ç§æ´¾ç”Ÿï¼Œè¿™æ˜¯å®ç°ä¸€ç§traitçš„æ–¹å¼ã€‚

### structçš„æ–¹æ³•

æ–¹æ³•å’Œå‡½æ•°ç±»ä¼¼ï¼š`fn`å…³é”®å­—ã€åç§°ã€å‚æ•°ã€è¿”å›å€¼ç›¸ä¼¼

ä¸åŒä¹‹å¤„ï¼š

- æ–¹æ³•æ˜¯åœ¨structï¼ˆæˆ–è€…`enum`ã€`trait`å¯¹è±¡ï¼‰çš„ä¸Šä¸‹æ–‡ä¸­å®šä¹‰
- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯selfï¼Œè¡¨ç¤ºæ–¹æ³•è¢«è°ƒç”¨çš„structå®ä¾‹

æ–¹æ³•çš„å®šä¹‰

- ä½¿ç”¨`impl`å…³é”®å­—ï¼Œå®šä¹‰åœ¨`impl`å—ä¸­ï¼Œ
- æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯&selfï¼Œä¹Ÿå¯ä»¥è·å¾—å…¶æ‰€æœ‰æƒæˆ–å¯å˜å€Ÿç”¨ï¼Œå’Œå…¶ä»–å‚æ•°ä¸€æ ·ã€‚

```rust
#[derive(Debug)]
struct Rectangle
{
    width: u32,
    length: u32,
}

impl Rectangle{
    fn area(&self) ->u32
    {
        self.width * self.length
    }
}

fn main()
{
    let rect = Rectangle{
        width: 30,
        length: 50,
    };

    println!("{}", rect.area());
    println!("{:#?}", rect);
}
```

#### æ–¹æ³•è°ƒç”¨çš„è¿ç®—ç¬¦

rustæ²¡æœ‰->è¿ç®—ç¬¦

rustä¼šè‡ªåŠ¨è§£å¼•ç”¨æˆ–è€…è‡ªåŠ¨å¼•ç”¨ï¼šåœ¨è°ƒç”¨æ–¹æ³•æ—¶å°±ä¼šå‘ç”Ÿè¿™ç§è¡Œä¸º

åœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œrustæ ¹æ®æƒ…å†µè‡ªåŠ¨æ·»åŠ `& &mut *`ï¼Œä»¥ä¾¿objectå¯ä»¥åŒ¹é…æ–¹æ³•çš„ç­¾åã€‚

ä¸‹é¢ä¸¤è¡Œä»£ç æ•ˆæœç›¸åŒï¼š

-  p1.distance(&p2);
- (&p1).distance(&p2);

```rust
impl Rectangle{
    fn area(&self) ->u32
    {
        self.width * self.length
    }
    
    fn can_hold(&self, other: &Rectangle)->bool{
        self.width > other.width && self.length > other.length
    }
}
```

å¦‚ä¸Šæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–¹æ³•ä¹‹åã€‚è¯•ç€è°ƒç”¨å‡½æ•°

```rust
fn main()
{
    let rect1 = Rectangle{
        width: 30,
        length: 50,
    };
    
    let rect2 = Rectangle{
        width: 20,
        length: 10,
    };

    println!("{}", rect1.can_hold(&rect2));
}
```

#### å…³è”å‡½æ•°

å¯ä»¥åœ¨`impl`å—é‡Œå®šä¹‰ä¸æŠŠselfä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä»–ä»¬å«å…³è”å‡½æ•°ä¾‹å¦‚ String::from()

å…³è”å‡½æ•°é€šå¸¸ç”¨äºæ„é€ å™¨ï¼Œç”¨æ¥ç”Ÿæˆå…³è”ç±»å‹çš„å®ä¾‹ã€‚

```rust
impl Rectangle{
    fn area(&self) ->u32
    {
        self.width * self.length
    }
    
    fn can_hold(&self, other: &Rectangle)->bool{
        self.width > other.width && self.length > other.length
    }
    
    fn square(size: u32) -> Rectangle{
        Rectangle {
            width: size,
            length: size,
        }
    }
}

fn main(){
    let s = Rectangle::square(20);
}
```

**æ¯ä¸ª`struct`å¯ä»¥æœ‰å¤šä¸ª`impl`å—**

------

## æšä¸¾ä¸æ¨¡å¼åŒ¹é…

### å®šä¹‰æšä¸¾

ä»¥ipåœ°å€ä½œä¸ºä¾‹å­ï¼Œä¸¾ä¾‹

```rust
enum IpAddrKind {
    V4,
    V6, // æšä¸¾çš„å˜ä½“
}

let four = IpAddrKind::V4; // åˆ›å»ºæšä¸¾å€¼ï¼Œ ä½†æ˜¯ é‡Œé¢æ²¡æœ‰å…·ä½“çš„å‚æ•°å€¼é˜¿ï¼Ÿ
let six = IpAddrKind::V6;
```

å°†æšä¸¾ä½œä¸ºå‚æ•°ä¼ é€’

```rust
enum IpAddrKind {
    V4,
    V6,
}

fn route(ip_kind: IpAddrKind){}

fn main(){
    let four = IpAddrKind::V4;
    let six = IpAddrKind::V6;

    route(four);
    route(six);
    route(IpAddrKind::V6);
}
```

æšä¸¾ä½œä¸ºstructä¸­çš„ä¸€ä¸ªæˆå‘˜ä½¿ç”¨ã€‚

```rust
enum IpAddrKind {
    V4,
    V6,
}
struct IpAddr {
    kind: IpAddrKind,
    address: String,
}
fn main() {
    let home = IpAddr{
        kind: IpAddrKind::V4, // è¿™é‡Œè¿˜æ˜¯æ²¡æœ‰å…·ä½“çš„å€¼
        address: String::from("127.0.0.1"),
    };
    let loopback = IpAddr{
        kind: IpAddrKind::V6,
        address: String::from("::1"),
    };
}
```

å°†æ•°æ®é™„åŠ åˆ°æšä¸¾å˜ä½“ä¸­

```rust
enum IpAddr {
    V4(u8,u8,u8,u8),  // åœ¨å˜ä½“ä¸­æŒ‡å®šå°±å¯ä»¥å‘å…¶ä¸­å­˜å‚¨æ•°æ®
    V6(String),
}

fn main() {
    let home = IpAddrKind::V4(127,0,0,1);
    let loopback = IpAddrKind::V6(String::from("::1"));
}
```

ä¼˜ç‚¹ï¼š 

- ä¸éœ€è¦é¢å¤–ä½¿ç”¨structç»“æ„
- æ¯ä¸ªå˜ä½“å¯ä»¥æ‹¥æœ‰ä¸åŒçš„ç±»å‹ä»¥åŠå…³è”çš„æ•°æ®é‡

### ä¸ºæšä¸¾å®šä¹‰æ–¹æ³•

ä¸`struct`ç›¸ä¼¼ï¼Œæšä¸¾çš„æ–¹æ³•ä¹Ÿæ˜¯å®šä¹‰åœ¨`impl`ä¸­

```rust
impl Message {
    fn call(&self) {}
}
```

### Optionæšä¸¾ç±»å‹

Optionå®šä¹‰äºæ ‡å‡†åº“ä¸­ã€‚åœ¨preludeé¢„å¯¼å…¥æ¨¡å—ä¸­ã€‚

ä»–æè¿°äº†ï¼šæŸä¸ªå€¼å¯èƒ½å­˜åœ¨ï¼ˆæŸç§ç±»å‹ï¼‰æˆ–è€…ä¸å­˜åœ¨çš„æƒ…å†µã€‚ä¸ºäº†æ›¿æ¢NULLè¿™ä¸ªå€¼ã€‚

RUST ä¸­æ˜¯æ²¡æœ‰NULLçš„ã€‚å½“ä½ å°è¯•ä½¿ç”¨éNULLå€¼é‚£æ ·ä½¿ç”¨NULLå€¼çš„æ—¶å€™ï¼Œå°±ä¼šå¼•èµ·æŸç§é”™è¯¯ã€‚

rustä¸­ç±»ä¼¼NULLçš„æ¦‚å¿µçš„æ˜¯ Option<T>

æ ‡å‡†åº“ä¸­çš„å®šä¹‰æ˜¯

```rust
enum Option<T> {
    Some(T),
    None,
}
```

ä»–åŒ…å«åœ¨preludeä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‡ ç§æ¥å£ï¼Œå…¶ä¸­Tæ˜¯æŒ‡å…·ä½“çš„ç±»å‹

```rust
Option<T>
Some(T)
None
```

å…·ä½“ç”¨æ³•

````rust
fn main() {
    let x:i8 = 5;
    let y: Option<i8> = Some(5);
    
    let sum = x + y; // è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºOption<i8>å¹¶ä¸ç­‰äºi8ï¼Œä¸¤è€…å¹¶ä¸æ˜¯ä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿç›¸åŠ ï¼Œæƒ³è¦è¿›è¡Œè®¡ç®—éœ€è¦å°†Optionè¿›è¡Œè½¬æ¢ä¸ºi8ã€‚
}
````



## match

å…è®¸ä¸€ä¸ªå€¼å’Œä¸€ç³»åˆ—æ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œå¹¶æ‰§è¡ŒåŒ¹é…çš„æ¨¡å¼å¯¹åº”çš„ä»£ç ã€‚

æ¨¡å¼å¯ä»¥æ˜¯`å­—é¢å€¼`ï¼Œ`å˜é‡å` ï¼Œ`é€šé…ç¬¦`ç­‰

```rust
enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter,
}

fn value_in_cents(coin: Coin) -> u8 {
    match coin {
        Coin::Penny => {
            println!("penny");
            1
        }, // {}ç”¨æ¥æ‹¬ä½å¤šè¡Œè¯­å¥
        Coin::Nickel => 5,  // =>åæ˜¯åŒ¹é…æˆåŠŸåï¼Œæ‰§è¡Œçš„ä»£ç ã€‚
        Coin::Dime => 10,
        Coin::Quarter => 25,
    } // åŒ¹é…æˆåŠŸçš„è¡¨è¾¾å¼å€¼ï¼Œä¼šä½œä¸ºæ•´ä¸ªmatchè¡¨è¾¾å¼çš„å€¼è¿”å›
}

fn main() {}
```

#### ç»‘å®šå€¼çš„æ¨¡å¼

åŒ¹é…çš„åˆ†æ”¯ï¼ˆmatchä¸­çš„åˆ†æ”¯ï¼‰å¯ä»¥ç»‘å®šåˆ°è¢«åŒ¹é…å¯¹è±¡ï¼ˆä¼ è¿›æ¥çš„å€¼ï¼‰çš„éƒ¨åˆ†å€¼ã€‚

å› æ­¤ï¼Œå¯ä»¥ä»`enum`å˜ä½“ä¸­æå–å€¼ã€‚

```rust
#[derive(Debug)]
enum UsState {
    Alabama,
    Alaska,
}

enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter(UsState),
}

fn value_in_cents(coin: Coin) -> u8 {
    match coin {
        Coin::Penny => {
            println!("penny");
            1
        } // {}ç”¨æ¥æ‹¬ä½å¤šè¡Œè¯­å¥
        Coin::Nickel => 5,
        Coin::Dime => 10,
        Coin::Quarter(state) => { // ç”±äºQuarterå¯ä»¥å­˜å‚¨å€¼ï¼Œæ‰€ä»¥ä½¿ç”¨stateå­˜å‚¨å€¼ã€‚è¿™å°±æ˜¯ç»‘å®šå€¼çš„åŒ¹é…
            println!("State quarter from {:?}!", state);
            25
        }
    }
}

fn main() {
    let c = Coin::Quarter(UsState::Alaska);
    println!("{}", value_in_cents(c));
}

```


### åŒ¹é…Optionå€¼

```rust
fn main() {
    let five = Some(6);
    let six = plus_one(five);
    let none = plus_one(None);
}

fn plus_one(x: Option<i32>) -> Option<i32>{
    match x{
        None => None,
        Some(i) => Some(i+1),
    } // è¿”å›çš„æ˜¯Optionå¯¹è±¡
}
```

matchåœ¨åŒ¹é…æ—¶è¦è¦†ç›–åˆ°æ‰€æœ‰çš„å¯èƒ½æƒ…å†µã€‚æ¯”å¦‚ä¸Šæ–¹çš„ä¾‹å­ï¼Œxæ˜¯Optionçš„ç±»å‹ï¼Œå…¶ä¸­Optionä¸­æœ‰å¯èƒ½æœ‰Noneå€¼ï¼Œéœ€è¦è¦†ç›–åˆ°è¿™ç§æƒ…å†µã€‚

å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ `_`æ¥è¦†ç›–å…¶ä½™çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢çš„æ–¹å¼

```rust
fn main() {
    let v = 0u8;
    match v {
        1 => println!("one"),
        2 => println!("three"),
        3 => println!("five"),
        4 => println!("seven"),
        _ => (),
    }
}
```



#### if letä¸€ä¸ªç®€å•çš„æ§åˆ¶æµ

åªå…³å¿ƒä¸€ç§åŒ¹é…è€Œå¿½ç•¥å…¶ä»–åŒ¹é…çš„æƒ…å†µã€‚ç›¸å½“äºåªæœ‰ä¸€ä¸ª if å‰©ä¸‹éƒ½æ˜¯else

````rust
fn main() {
    let v = Some(0u8);
    match v {
        Some(3) => println!("three"),
        _ => (),
    }
    
    if let Some(3) = v {
        println!("three");
    }
    else {
        println!("others");
    }
    // ä¸Šé¢çš„æ®µä»£ç æ˜¯ç­‰ä»·çš„ã€‚
}
````



## Package crate module

rustçš„ä»£ç ç»„ç»‡åŒ…å«ä»€ä¹ˆå†…å®¹ï¼š

- é‚£äº›ç»†èŠ‚å¯ä»¥æš´éœ²ï¼Œé‚£äº›ç»†èŠ‚æ˜¯ç§æœ‰çš„
- ä½œç”¨åŸŸå†…å“ªäº›åç§°æœ‰æ•ˆã€‚ç­‰ç­‰



æ¨¡å—ç³»ç»Ÿï¼š

- packageï¼šcargoçš„ç‰¹æ€§ï¼Œè®©ä½ æ„å»ºã€æµ‹è¯•ã€å…±äº«crate
- crateï¼šä¸€ä¸ªæ¨¡å—æ ‘ï¼Œå®ƒå¯äº§ç”Ÿä¸€ä¸ªlibraryæˆ–å¯æ‰§è¡Œæ–‡ä»¶
- moduleã€useï¼šè®©ä½ æ§åˆ¶ä»£ç çš„ç»„ç»‡ã€ä½œç”¨åŸŸã€ç§æœ‰è·¯å¾„
- pathï¼šä¸ºstructã€functionã€æˆ–moduleç­‰å‘½åçš„æ–¹å¼

### package å’Œcrate

crateçš„ç±»å‹ï¼š

1. `binary`
2. `library` äºŒè¿›åˆ¶çš„

crate root:

æºä»£ç æ–‡ä»¶ã€‚rustç¼–è¯‘å™¨ä»è¿™é‡Œå¼€å§‹ï¼Œç»„æˆä½ çš„Crateçš„æ ¹Moduleï¼ˆæ•´ä¸ªpackageçš„å…¥å£ï¼Ÿï¼‰ã€‚

ä¸€ä¸ªpackageä¸­ï¼š

1. åŒ…å«ä¸€ä¸ªCargo.tomlï¼Œå®ƒæè¿°äº†å¦‚ä½•æ„å»ºè¿™äº›Crates
2. åªèƒ½åŒ…å«0-1ä¸ªlibrary crate
3. å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„binary crate
4. ä½†å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ªcrateï¼ˆlibraryæˆ–binaryï¼‰

### cargoä¸­å¯¹libraryå’Œbinaryçš„åŒºåˆ†

åœ¨rustçš„é¡¹ç›®ç›®å½•ä¸­ï¼Œsrcå­˜æ”¾æºæ–‡ä»¶è€Œï¼ˆæ³¨æ„è¿™æ˜¯ä¸¤ä¸ª**æ–‡ä»¶**ï¼‰

src/main.rs:

- æ˜¯binary crateçš„carte root
- crateåç§°ä¸packageåç§°ç›¸åŒ

src/lib.rs:

- package åŒ…å«ä¸€ä¸ªlibrary crate
- library crate çš„crate root
- crateåç§°ä¸packageåç§°ç›¸åŒ

cargoçš„æƒ¯ä¾‹

ä¸€ä¸ªpackageå¯ä»¥åŒæ—¶åŒ…å« src/main.rs å’Œ src/lib.rsã€‚

ä¸€ä¸ªpackageå¯ä»¥æœ‰å¤šä¸ªbinary crateã€‚æ–‡ä»¶æ”¾åœ¨src/binï¼Œæ¯ä¸ªæ–‡ä»¶æ˜¯å•ç‹¬çš„binary crateã€‚

carteçš„ä½œç”¨

å°†ç›¸å…³åŠŸèƒ½ç»„åˆåˆ°ä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œä¾¿äºåœ¨é¡¹ç›®é—´è¿›è¡Œå…±äº«ã€‚é˜²æ­¢å‘½åå†²çªã€‚

#### moduleæ¥æ§åˆ¶ä½œç”¨åŸŸå’Œç§æœ‰æ€§

ä½œç”¨ï¼š 

1. moduleåœ¨ä¸€ä¸ªcarteå†…ï¼Œå°†ä»£ç è¿›è¡Œåˆ†ç±»
2. å¢åŠ ç¨‹åºçš„å¯è¯»æ€§ï¼Œæ˜“äºå¤ç”¨
3. æ§åˆ¶é¡¹ç›®çš„ç§æœ‰æ€§ã€‚publicã€private

å¦‚ä½•ä½¿ç”¨ï¼Ÿï¼Ÿ é¦–å…ˆå»ºç«‹module

- ä½¿ç”¨modå…³é”®å­—
- å¯ä»¥åµŒå¥—å®šä¹‰
- å¯ä»¥åŒ…å«å…¶ä»–é¡¹ç›®ï¼ˆstructã€enumã€å¸¸é‡ã€traitã€å‡½æ•°ç­‰ï¼‰çš„å®šä¹‰

```rust
mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}
        fn seat_at_table() {}
    }
    mod serving {
        fn take_order() {}
        fn serve_order() {}
    }
}
```

**src/main.rs å’Œsrc/lib.rs å«åšcrate rootsã€‚ è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼ˆä»»æ„ä¸€ä¸ªï¼‰çš„å†…å®¹å½¢æˆäº†åä¸ºcratreçš„æ¨¡å—ï¼Œä½äºæ•´ä¸ªæ¨¡å—æ ‘çš„æ ¹éƒ¨ã€‚å¦‚ä¸‹æ˜¯å‘½åç©ºé—´çš„ç»“æ„**

````
crate  --> æ­¤å¤„æ˜¯æ ¹
	front_of_house
	    hosting
	    	add_to_waitlist
	    	seat_at_table
	    serving
	   	take_order
	   	server_order
````

å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ï¼Œ ç»“æ„å…¶å®æ˜¯æ”¾åœ¨ crateè¿™ä¸ªéšå¼çš„æ ¹æ¨¡å—ä¸‹é¢äº†


### è·¯å¾„path

ä½ æƒ³è¦æ‰¾åˆ°æ¨¡å—ä¸­çš„æŸä¸ªä¸œè¥¿ï¼Œéœ€è¦çŸ¥é“ä»–çš„è·¯å¾„ã€‚ç±»ä¼¼å‘½åç©ºé—´

è·¯å¾„æœ‰ä¸¤ç§å½¢å¼ï¼š

- ç»å¯¹è·¯å¾„ï¼šä»crate rootå¼€å§‹ï¼Œä½¿ç”¨crateåæˆ–è€…å­—é¢å€¼crate
- ç›¸å¯¹è·¯å¾„ï¼šä»å½“å‰æŸå—å¼€å§‹ï¼Œä½¿ç”¨selfï¼Œsuperæˆ–å½“å‰æ¨¡å—çš„æ ‡è¯†ç¬¦ï¼ˆï¼Ÿï¼Ÿï¼‰

è·¯å¾„è‡³å°‘ç”±ä¸€ä¸ªæ ‡è¯†ç¬¦ç»„æˆï¼Œæ ‡è¯†ç¬¦ä¹‹é—´ä½¿ç”¨::

```rust
mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    crate::front_of_house::hosting::add_to_waitlist();  // ç»å¯¹è·¯å¾„ã€‚crateä½œä¸ºå½“å‰æ–‡ä»¶çš„ç§°å‘¼
    front_of_house::hosting::add_to_waitlist(); // ç›¸å¯¹è·¯å¾„
}
```

#### ç§æœ‰è¾¹ç•Œ

æ¨¡å—ä¸ä»…å¯ä»¥ç»„ç»‡ä»£ç ï¼Œè¿˜å¯ä»¥å®šä¹‰ç§æœ‰è¾¹ç•Œ

å¦‚æœæƒ³æŠŠ**å‡½æ•°**æˆ–**struct**ç­‰è®¾ä¸ºç§æœ‰ï¼Œå¯ä»¥å°†å®ƒæ”¾åˆ°æŸä¸ªæ¨¡å—ä¸­ã€‚

rust ä¸­æ‰€æœ‰çš„æ¡ç›®ï¼ˆå‡½æ•°ï¼Œæ–¹æ³•ï¼Œstructï¼Œenumï¼Œæ¨¡å—ï¼Œå¸¸é‡ï¼‰**é»˜è®¤**æ˜¯**ç§æœ‰çš„**ï¼Œä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ã€‚

å°†è¿™äº›ç»“æ„é»˜è®¤éƒ½ä¸ºç§æœ‰çš„ï¼Œæ˜¯ä¸ºäº†åŒºåˆ†å“ªäº›æ˜¯ç§æœ‰çš„å“ªäº›æ˜¯å…¬å…±çš„ï¼Œå¹¶ä¸”é»˜è®¤çš„å°†æ‰€æœ‰å†…éƒ¨å®ç°çš„ç»†èŠ‚éƒ½éšè—äº†èµ·æ¥ï¼Œåªæœ‰å½“éœ€è¦å…¬å¼€çš„æ—¶å€™æ‰å¼€æ”¾æ¥å£ã€‚

```rust
mod front_of_house { // ç§æœ‰çš„
    mod hosting {  // ç§æœ‰çš„
        fn add_to_waitlist() {}  // ç§æœ‰çš„
    }
}

pub fn eat_at_restaurant() {  // å…¬å…±çš„
    crate::front_of_house::hosting::add_to_waitlist();  // è¿™é‡Œä¼šæŠ¥é”™ï¼Œè¯´hostingæ˜¯ç§æœ‰çš„ 
    front_of_house::hosting::add_to_waitlist();  // è¿™é‡Œä¼šæŠ¥é”™ï¼Œè¯´hostingæ˜¯ç§æœ‰çš„
}
```

```
 --> src/lib.rs:8:28
  |
8 |     crate::front_of_house::hosting::add_to_waitlist();
  |                            ^^^^^^^ private module
  |
```

çˆ¶æ¨¡å—æ— æ³•è®¿é—®å­æ¨¡å—ä¸­çš„ç§æœ‰æ¡ç›®

å­æ¨¡å—é‡Œå¯ä»¥ä½¿ç”¨æ‰€æœ‰ç¥–å…ˆæ¨¡å—ä¸­çš„æ¡ç›®

#### pubå…³é”®å­—

ä½¿ç”¨pubå…³é”®å­—å°†æŸäº›æ¡ç›®æ ‡è®°ä¸ºå…¬å…±çš„

```rust
mod front_of_house { // è¿™é‡Œä¸ç”¨åŠ æ˜¯å› ä¸ºä»–åœ¨æ ¹çº§çš„è·¯å¾„ä¸‹ï¼ŒåŒçº§åˆ«çš„å…¶ä»–å†…å®¹å¯ä»¥è°ƒç”¨ä»–
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    crate::front_of_house::hosting::add_to_waitlist(); // è¿™æ—¶å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œå› ä¸ºå°†ä»–ä»¬éƒ½è®¾ç½®ä¸ºå…¬å…±çš„äº†
    front_of_house::hosting::add_to_waitlist();
}
```

#### superå…³é”®å­—

superï¼šç”¨æ¥è®¿é—®çˆ¶çº§æ¨¡å—è·¯å¾„ä¸­çš„å†…å®¹ï¼Œç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„`..`ï¼Œè¿™æ˜¯åœ¨ç›¸å¯¹è·¯å¾„ä¸­ä½¿ç”¨çš„ï¼Œç»å¯¹è·¯å¾„ä¸éœ€è¦è¿™ä¸ªã€‚

```rust
fn serve_order() {}

mod back_of_house {
    fn fix_incorrect_order() {
        cook_order();
        super::serve_order(); // è¿™é‡Œå°±ä½¿ç”¨äº†superæ¥è°ƒç”¨æ¨¡å—å¤–çš„å‡½æ•°
        crate::serve_order(); // ä½¿ç”¨ç»å¯¹è·¯å¾„ 
    }
    
    fn cook_order() {}
}
```

#### pub struct

- pub æ”¾åœ¨structå‰
- structæ˜¯å…¬å…±çš„  structçš„å­—æ®µé»˜è®¤æ˜¯ç§æœ‰çš„

è¿™ä¹Ÿæ˜¯åœ¨æ¨¡å—ä¸­ ä½¿ç”¨çš„ï¼Œï¼ˆæ”¾åœ¨æ ¹ç»“æ„ä¸­å°±ä¸éœ€è¦äº†ï¼Œé™¤éè¦åœ¨å…¶ä»–æ–‡ä»¶ä¸­è®¿é—®å§ï¼Ÿï¼‰

`````rust
mod back_of_house {
    pub struct Breakfast {
        pub toast: String,
        seasonal_fruit: String,
    }

    impl Breakfast {
        pub fn summer(toast: &str) -> Breakfast { // åˆ›å»ºstructçš„å®ä¾‹æ–¹æ³•
            Breakfast {
                toast: String::from(toast),
                seasonal_fruit: String::from("peaches"),
            }
        }
    }
}

pub fn eat_at_restaurant() {
    let mut meal = back_of_house::Breakfast::summer("Rye");
    meal.toast = String::from("Wheat");  // å› ä¸ºtoastæ˜¯publicçš„ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¿®æ”¹å®ƒ
    println!("I'd like {} toast please", meal.toast);
    meal.seasonal_fruit = String::from("blueberries"); // è€Œseasonal_fruit ä¸æ˜¯publicçš„ä¸èƒ½ä¿®æ”¹å®ƒ
}
`````

#### pub enum

å½“å°†pubæ–¹åœ¨æšä¸¾å‰æ—¶ï¼Œæ•´ä¸ªæšä¸¾å°±éƒ½æ˜¯å…¬å…±çš„äº†ï¼Œè¿™ä¸structä¸åŒäº†ã€‚

```rust
mod back_of_house {
    pub enum Appetizer {
        Soup,
        Salad,
    }
}
```

#### use å…³é”®å­—

ä½¿ç”¨useå…³é”®å­—å°†è·¯å¾„å¯¼å…¥åˆ°ä½œç”¨åŸŸå†…ï¼Œè¿™ä»ç„¶éµå®ˆç§æœ‰æ€§è§„å®šï¼Œ(å¯¼å…¥çš„æ¨¡å—éœ€è¦æ˜¯å…¬æœ‰çš„ï¼Œå¯¼å…¥ä¹‹åï¼Œåœ¨å½“å‰çš„æ¨¡å—ä»ç„¶æ˜¯ç§æœ‰çš„ï¼Œé™¤éåŠ ä¸Š`pub`å…³é”®å­—)

å¹¶ä¸” ä¾ç„¶å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„è¿›è¡Œå¼•ç”¨

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use crate::front_of_house::hosting;  // ä»æ­¤ä»¥åå¯ä»¥ç›´æ¥ä½¿ç”¨hostingã€‚ç»å¯¹è·¯å¾„
use front_of_house::hosting;  // ç›¸å¯¹è·¯ç»

pub use crate::front_of_house::hosting; // ä½¿ç”¨pubä½¿å…¶å¯ä»¥ä»å…¶ä»–æ–‡ä»¶è°ƒç”¨hosting

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist()();
}
```



#### aså…³é”®å­—

`as` å…³é”®å­—å¯ä»¥ä¸ºå¼•å…¥çš„è·¯å¾„æŒ‡å®šæœ¬åœ°çš„**åˆ«å**

````rust
use std::io::Result as IoResult;
````



### ä½¿ç”¨å¤–éƒ¨åŒ… package

1. åœ¨`cargo.toml`ä¸­æ·»åŠ ä¾èµ–åŒ…çš„åç§°å’Œç‰ˆæœ¬
2. ä½¿ç”¨`use`å°†ç‰¹å®šçš„æ¡ç›®å¼•å…¥ä½œç”¨åŸŸ

```rust
[dependencies]
rand = "0.5.5"
```

æ ‡å‡†åº“ï¼ˆ`std`ï¼‰ä¹Ÿè¢«å½“ä½œå¤–éƒ¨åŒ…ä½¿ç”¨ã€‚ä½†æ˜¯ä¸ç”¨ åœ¨`cargo.toml`ä¸­æ·»åŠ stdåŒ…

ä½¿ç”¨åµŒå¥—è·¯å¾„æ•´ç†é‡å¤çš„å¯¼å…¥

`è·¯å¾„ç›¸åŒçš„éƒ¨åˆ†::{è·¯å¾„å·®å¼‚çš„éƒ¨åˆ†}`

```rust
use std::{cmp::Ordering, io};
use std::io::{self, Write}; // selfç”¨æ¥å¼•ç”¨è‡ªå·±ï¼Œå³å‰é¢å…¬å…±çš„éƒ¨åˆ†ï¼ˆstd::ioï¼‰
```

é€šé…ç¬¦ * ã€‚å’Œpythonä¸­çš„åŠŸèƒ½ç›¸åŒã€‚

````rust
use std::io::*
````



å°†æ¨¡å—çš„å†…å®¹ç§»åŠ¨åˆ°å…¶ä»–æ–‡ä»¶

æ¨¡å—å®šä¹‰æ—¶ï¼Œå¦‚æœæ¨¡å—ååé¢æ˜¯`;`ï¼Œè€Œä¸æ˜¯ä»£ç å—

- rustä¼šä»ä¸æ¨¡å—åŒåçš„æ–‡ä»¶ä¸­åŠ è½½å†…å®¹
- æ¨¡å—æ ‘çš„ç»“æ„ä¸ä¼šå˜åŒ–

## å¸¸ç”¨çš„é›†åˆ

åˆ†é…åœ¨å †å†…å­˜ä¸Šçš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥åŠ¨æ€æ”¹å˜å¤§å°ã€‚ä¸åˆ—è¡¨ç±»ä¼¼å§ã€‚åªèƒ½å­˜æ”¾ç›¸åŒç±»å‹çš„æ•°æ®ã€‚

### Vector

`Vec<T>`

- ç”±æ ‡å‡†åº“æä¾›
- å¯å­˜å‚¨å¤šä¸ªå€¼
- åªèƒ½å­˜å‚¨ç›¸åŒç±»å‹çš„æ•°æ®
- å€¼åœ¨å†…å­˜ä¸­è¿ç»­å­˜æ”¾

 åˆ›å»ºVector

1. Vec::new

   ````rust
   fn main() {
       let v: Vec<i32> = Vec::new(); // ä¸ºinweiæˆ‘ä»¬ä½¿ç”¨Vec::new()åˆ›å»ºçš„æ˜¯ç©ºçš„vectorï¼Œæ— æ³•è¿›è¡Œç±»å‹æ¨æ–­ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šç±»å‹ã€‚æŒ‡å®šç±»å‹æ˜¯ä¸ºäº†åˆ†é…å­˜å‚¨ç©ºé—´ã€‚
   }
   ````

2. ä½¿ç”¨åˆå§‹å€¼åˆ›å»º`Vec<T>`ï¼Œä½¿ç”¨`vec!`å®

   ```rust
   fn main() {
       let v = vec![1,2,3];  // è¿™é‡Œå¯ä»¥æ¨æ–­å‡ºç±»å‹
   }
   ```

æ›´æ–°Vector

ä½¿ç”¨pushå‘vectorä¸­æ·»åŠ å…ƒç´ 

```rust
fn main() {
    let mut v = Vec::new();
    
    v.push(1);  // è¿™é‡Œæœ‰ä¸Šä¸‹æ–‡ç±»å‹æ¨æ–­
    v.push(2);
    v.push(3);
}
```

åˆ é™¤Vector

å’Œstructä¸€æ ·ï¼Œå½“Vectorç¦»å¼€ä½œç”¨åŸŸåï¼Œå®ƒå°±ä¼šè¢«æ¸…ç†æ‰ï¼Œå®ƒæ‰€æœ‰çš„å…ƒç´ ä¹Ÿä¼šè¢«æ¸…ç†æ‰ã€‚

å¦‚æœVectoré‡Œé¢å­˜å‚¨äº†å¼•ç”¨ï¼Œå°±éœ€è¦ç‰¹æ®Šçš„å¤„ç†äº†



è¯»å–Vectorä¸­çš„å…ƒç´ 

ä¸¤ç§æ–¹å¼å¼•ç”¨Vectorä¸­çš„å€¼ï¼š(ä»–ä»¬è¿”å›çš„æ˜¯ç´¢å¼•è¿˜æ˜¯æ‰€æœ‰æƒï¼Ÿï¼Ÿ)

1. ç´¢å¼•
2. getæ–¹æ³•ï¼ˆæ‰¾ä¸åˆ°å°±è¿”å›noneï¼‰

```rust
fn main() {
    let v = vec![1,2,3,4,5];
    let third: &i32 = &v[2];
    println!("The third element is {}", third);
    
    match v.get(2) {
        Some(third) => println!("The third element is {}", third),
        None => println!("There is no third element"),
    }
}
```

æ‰€æœ‰æƒå’Œå€Ÿç”¨è§„åˆ™åœ¨Vectorä¸­åŒæ ·é€‚ç”¨ï¼šä¸èƒ½åœ¨åŒä¸€ä½œç”¨åŸŸå†…åŒæ—¶æ‹¥æœ‰å¯å˜å’Œä¸å¯å˜å¼•ç”¨ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å¯å˜å€Ÿç”¨ä¸­ï¼Œæ„å¤–ä¿®æ”¹Vectoråé‡æ–°åˆ†é…å­˜å‚¨ç©ºé—´å¯¼è‡´å¼•ç”¨å¤±æ•ˆã€‚

```rust
fn main() {
    let mut v = vec![1,2,3,4,5];
    let first = &v[0];  // ä¸å¯å˜å€Ÿç”¨
    v.push(6);  // å¯å˜å€Ÿç”¨
    println!("The first element is {}", first);
}
```

éå†Vector

```rust
fn main() {
    let v = vec![2,3,4];
    for i in &v {
        println!("{}", i);
    }
}
```

```rust
fn main() {
    let mut v = vec![2,3,4];
    for i in &mut v {
        *i += 20;
    }
}
```



#### ä½¿ç”¨enumæ¥å­˜å‚¨å¤šç§æ•°æ®ç±»å‹

Enumçš„å˜ä½“å¯ä»¥é™„åŠ ä¸åŒç±»å‹çš„æ•°æ®

Enumçš„å˜ä½“å®šä¹‰åœ¨åŒä¸€ä¸ªenumç±»å‹ä¸‹ã€‚åœ¨ç¼–è¯‘æ—¶çŸ¥é“ç±»å‹ï¼Œå°±å¯ä»¥åˆ†é…ç©ºé—´ï¼Œå¹¶ä¸”çŸ¥é“æ•°æ®æ”¯æŒå“ªäº›æ“ä½œã€‚

````rust
enum SpreadsheetCell {
    Int(i32),
    Float(f64),
    Text(String),
}

fn main() {
    let now = vec![
        SpreadsheetCell::Int(3),
        SpreadsheetCell::Text(String::from("blue")),
        SpreadsheetCell::Float(10.12), // ä¸‰ä¸ªå•å…ƒæ ¼ï¼Œæ¯ä¸ªå•å…ƒæ ¼éƒ½æ˜¯SpreadsheetCellä¸­çš„ä¸€ç§å˜ä½“
    ];
}
````



## å­—ç¬¦ä¸²

rustå­—ç¬¦ä¸²ä½¿äººå›°æ‰°çš„åŸå› 

- rustå€¾å‘äºæš´éœ²å¯èƒ½çš„é”™è¯¯
- å­—ç¬¦ä¸²æ•°æ®ç»“æ„å¤æ‚
- rustä¸­çš„å­—ç¬¦ä¸²utf-8

### ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²

byteç±»å‹çš„é›†åˆï¼Œå¹¶ä¸”æä¾›ä¸€äº›æ–¹æ³•ï¼Œèƒ½å°†byteè§£æä¸ºæ–‡æœ¬ã€‚

åœ¨rustçš„`æ ¸å¿ƒè¯­è¨€å±‚é¢`ï¼Œåªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡`str`ï¼ˆæˆ–&strï¼‰

å­—ç¬¦ä¸²åˆ‡ç‰‡ï¼šå¯¹å­˜å‚¨åœ¨å…¶ä»–åœ°æ–¹ã€utf-8ç¼–ç çš„å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼Œå­—ç¬¦ä¸²å­—é¢å€¼ï¼šå­˜å‚¨åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œä¹Ÿæ˜¯å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚



è¿™é‡Œè¦è®²çš„æ˜¯String ç±»å‹ï¼š

æ­¤ç±»å‹æ¥è‡ª`æ ‡å‡†åº“`è€Œä¸æ˜¯æ ¸å¿ƒè¯­è¨€å±‚é¢ã€‚å­˜å‚¨åœ¨å †ä¸Šå¯ä»¥å¢é•¿ã€å¯ä¿®æ”¹ã€å¯æ‹¥æœ‰ã€‚ä½¿ç”¨utf-8ç¼–ç ã€‚

### å…¶ä»–ç±»å‹çš„å­—ç¬¦ä¸²

rustæ ‡å‡†åº“ä¸­åŒ…å«äº†å¾ˆå¤šå…¶ä»–çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œä¾‹å¦‚ï¼š `OsStringã€OsStrã€CStringã€CStr`

- æœ‰String å’ŒStr åç¼€çš„ï¼Œåˆ†åˆ«ä»£è¡¨**Stringæ‹¥æœ‰æ‰€æœ‰æƒ**æˆ–**Strå€Ÿç”¨**çš„å˜ä½“
- å¯ä»¥å­˜å‚¨ä¸åŒç¼–ç çš„æ–‡æœ¬æˆ–åœ¨å†…å­˜ä¸­ä»¥ä¸åŒçš„å½¢å¼å±•ç°ã€‚

library crateé’ˆå¯¹å­˜å‚¨å­—ç¬¦ä¸²å¯æä¾›æ›´å¤šçš„é€‰é¡¹



### åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼ˆStringï¼‰

å¾ˆå¤š`Vec<T>`çš„æ“ä½œéƒ½å¯ç”¨äºStringã€‚åˆ›å»ºæ–¹æ³•

```rust
String::new()  // å‡½æ•°
```

ä½¿ç”¨åˆå§‹å€¼æ¥åˆ›å»ºStringï¼š

`to_string()` æ–¹æ³•  ï¼Œå¯ç”¨äºå®ç°äº†Display trait çš„ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢å€¼ã€‚

```rust
fn main() {
    let data = "initial contents";
    let s = data.to_string();
    let s1 = "initial contents".to_string();
}
```

`String::from()`å‡½æ•°ï¼Œä»å­—é¢å€¼åˆ›å»ºString

````rust
fn main() {
    let s = String::from("initial contents")
}
````

### æ›´æ–°String

`push_str()`æ–¹æ³•ï¼šæŠŠä¸€ä¸ªå­—ç¬¦ä¸²**åˆ‡ç‰‡**é™„åŠ åˆ°String

```rust
fn main() {
    let mut s = String::from("foo");
    s.push_str("bar");

    println!("{}", s);
}
```

å¯ä»¥çœ‹åˆ°push_strå‡½æ•°çš„ç­¾åï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯å˜çš„å€Ÿç”¨ï¼Œç¬¬äºŒä¸ªä¹Ÿæ˜¯ä¸€ä¸ªå€Ÿç”¨ã€‚éƒ½ä¸ä¼šè·å¾—å‚æ•°çš„æ‰€æœ‰æƒã€‚

```rust
pub fn push_str(&mut self, string: &str)
```

`push()` æŠŠå•ä¸ªå­—ç¬¦é™„åŠ åˆ°String

```rust
s.push('p')  // æ³¨æ„å•ä¸ªå­—ç¬¦ç”¨''
```



`+å·è¿æ¥`

è¿™æœ‰ä½¿ç”¨æ³›å‹å’Œå¤šæ€ç±»ä¼¼çš„

```rust
fn main() {
    let s1 = String::from("hello, ");
    let s2 = String::from("world!");

    let s3 = s1 + &s2;

    println!("{}", s3);
    println!("{}", s1); // è¿™é‡Œä¼šæŠ¥é”™ï¼Œè¯´s1çš„æ‰€æœ‰æƒå·²ç»è½¬ç§»ã€‚
    println!("{}", s2);
}
```

s1çš„æ‰€æœ‰å…¨å·²ç»è½¬ç§»ï¼Œæ˜¯å› ä¸ºä½¿ç”¨+çš„åŸå› ï¼Œè¿™æ˜¯å› ä¸º+ä½¿ç”¨äº†ç±»ä¼¼

````rust
fn add(self, s:&str) -> String{...}
````

ä»–ä¼šè·å¾—s1çš„æ‰€æœ‰æƒï¼Œè€Œç¬¬äºŒä¸ªæ•°ç”¨å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚

æ ‡å‡†åº“ä¸­çš„addæ–¹æ³•ä½¿ç”¨äº†æ³›å‹ï¼Œ

åªèƒ½æŠŠ&stræ·»åŠ åˆ°Stringã€‚

è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ã€‚ä¹‹æ‰€ä»¥èƒ½å¤Ÿå¯¹å¼•ç”¨å®ç°å­—ç¬¦ä¸²åˆ‡ç‰‡çš„åŠŸèƒ½ã€‚



`formatå®`

```rust
fn main() {
    let s1 = String::from("hello, ");
    let s2 = String::from("world!");

    let s3 = String::from("!!!!");

    let s = format!("{}-{}-{}",s1,s2,s3);
    println!("{}",s);
}
```

ä½¿ç”¨formatå®ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå˜é‡è¿›è¡Œæ¥æ”¶ã€‚è€Œä¸”formatå¹¶ä¸ä¼šè·å¾—å­—ç¬¦ä¸²çš„æ‰€æœ‰æƒï¼Œæ‰€ä»¥è¿˜å¯ä»¥åœ¨ä¹‹åçš„ä»£ç ä¸­ä½¿ç”¨ã€‚



### å¯¹StringæŒ‰ç´¢å¼•çš„å½¢å¼è¿›è¡Œè®¿é—®

æŒ‰ç´¢å¼•çš„è¯­æ³•è®¿é—®Stringçš„æŸéƒ¨åˆ†ï¼Œä¼šæŠ¥é”™ï¼ï¼ï¼ï¼

```rust
&s1[0]
```



rustçš„å­—ç¬¦ä¸²ä¸æ”¯æŒç´¢å¼•è¯­æ³•çš„è®¿é—®

Stringçš„å†…éƒ¨è¡¨ç¤ºï¼š Stringæ˜¯å¯¹`Vec<u8>`çš„åŒ…è£…ï¼Œå¹¶ä¸”ä»–æœ‰ä¸€ä¸ªlenæ–¹æ³•ï¼Œè¿”å›Stringçš„**å­—èŠ‚æ•°**ã€‚

```rust
fn main() {
    let len = String::from("something").len()
    
    println!("{}", len)
}
```

rustä¸­çœ‹å¾…å­—ç¬¦ä¸²æœ‰ä¸‰ç§æ–¹å¼  å­—èŠ‚ï¼ˆbytesï¼‰ã€æ ‡é‡å€¼ï¼ˆscalar values)ã€å­—å½¢ç°‡(grapheme clusters)

å­—èŠ‚ï¼šæŸ¥çœ‹çš„æ˜¯å­—ç¬¦ä¸²æ¯ä¸€ä¸ªå­—èŠ‚å­˜å‚¨çš„æ•´æ•°å€¼ã€‚

æ ‡é‡å€¼ï¼š è¿™æ˜¯unicodeä¸­çš„æ¦‚å¿µï¼Œæè¿°çš„æ˜¯ä¸€ä¸ªunicode**å­—ç¬¦**çš„è¡¨ç¤º

å­—å½¢ç°‡ï¼šæœ€æ¥è¿‘æˆ‘ä»¬çœ‹åˆ°çš„å­—ç¬¦ï¼Œä½†æ˜¯rust çš„æ ‡å‡†åº“æ˜¯ä¸æ”¯æŒçš„ã€‚

````rust
fn main() {
    let w = "ä¸€ä¸ªå­—ç¬¦ä¸²";
    println!("{}", w.len()); // 15ä¸ªå­—èŠ‚
    
    for b in w.bytes() {
        println!("{}", b); // 228 184 128 228 184 170 229 173 151 231 172 166 228 184 178
        // æ¯ä¸ªä¸­æ–‡å­—ç¬¦å ç”¨3ä¸ªå­—èŠ‚
    }
}
````

```rust
fn main() {
    let w = "ä¸€ä¸ªå­—ç¬¦ä¸²";
    
    for b in w.chars() {
        println!("{}", b);
    }
}
```

rust ä¸å…è®¸å¯¹Stringè¿›è¡Œç´¢å¼•çš„æœ€åä¸€ä¸ªåŸå› æ˜¯ï¼š

- ç´¢å¼•æ“ä½œåº”è¯¥æ¶ˆè€—å¸¸é‡çš„æ—¶é—´ï¼ˆO(1)ï¼‰
- è€ŒStringæ— æ³•ä¿è¯è¿™ä¸€ç‚¹ï¼Œå®ƒéœ€è¦éå†æ‰€æœ‰å†…å®¹ï¼Œæ¥ç¡®å®šæœ‰å¤šå°‘åˆæ³•çš„å­—ç¬¦ã€‚

### åˆ‡å‰²String

å¯ä»¥ä½¿ç”¨**[]**å’Œ**ä¸€ä¸ªèŒƒå›´**æ¥åˆ›å»ºå­—ç¬¦ä¸²çš„åˆ‡ç‰‡

```rust
fn main() {
    let w = "ä¸€ä¸ªå­—ç¬¦ä¸²";
    let s = &w[0..3]; // åªä¼šå–åˆ°'ä¸€'ã€‚å¦‚æœæ˜¯4å°±ä¼španick
    println!("{}", s);
}
```



## åˆ›å»ºhashmap

åˆ›å»ºHashmapï¼š new()å‡½æ•°

æ·»åŠ æ•°æ®ï¼š insert()æ–¹æ³•

```rust
use std::collections::HashMap;

fn main() {
    let mut scores: HashMap<String, i32> = HashMap::new();  // æ²¡æœ‰åŠ å…¥å€¼æ—¶éœ€è¦æŒ‡å®šç±»å‹ 
}
```

```rust
use std::collections::HashMap;

fn main() {
    let mut scores = HashMap::new();
    scores.insert(String::from("Blue"), 20); // åŠ å…¥æ•°æ®å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­å‡ºæ¥ç±»å‹
}

```

- ç”±äºhashmapç”¨çš„ä¸è¾ƒå°‘ï¼Œä¸åœ¨preludeä¸­ï¼Œéœ€è¦æ‰‹åŠ¨å¯¼å…¥
- æ ‡å‡†åº“å¯¹å…¶æ”¯æŒè¾ƒå°‘ï¼Œæ²¡æœ‰å†…ç½®çš„å®æ¥åˆ›å»ºhashmap
- æ•°æ®å­˜å‚¨åœ¨heapä¸Š
- hashmapæ˜¯åŒæ„çš„ï¼Œè¿™æ˜¯æŒ‡ä¸€ä¸ªhashmapä¸­ï¼š
- - æ‰€æœ‰çš„kå¿…é¡»æ˜¯åŒä¸€ç§ç±»å‹
  - æ‰€æœ‰çš„Vå¿…é¡»æ˜¯ç”¨ä¸€ç§ç±»å‹



### ä½¿ç”¨collectæ–¹æ³•åˆ›å»ºhashmap

åœ¨å…ƒç´ ç±»å‹ä¸ºtupleçš„vectorä¸Šä½¿ç”¨collectæ–¹æ³•ï¼Œå¯ä»¥ç»„å»ºä¸€ä¸ªhashmapï¼š

- tupleå¿…é¡»æœ‰ä¸¤ä¸ªå€¼ï¼Œä¸€ä¸ªä½œä¸ºkï¼Œä¸€ä¸ªä½œä¸ºv

- collect æ–¹æ³•å¯ä»¥æŠŠæ•°æ®æ•´åˆæˆå¤šç§é›†åˆç±»å‹ï¼ŒåŒ…æ‹¬hashmap
  - è¿”å›å€¼éœ€è¦æ˜¾å¼æŒ‡æ˜ç±»å‹ 

```rust
use std::collections::HashMap;

fn main() {
    let teams = vec![String::from("Blue"), String::from("yellow")];
    let intial_scores = vec![10, 50];

    let scores: HashMap<_, _> = teams.iter().zip(intial_scores.iter()).collect(); // è¿™ä¸ªä¾‹å­å’Œpythonä¸­ç±»ä¼¼å°†ä¸¤ä¸ªvecter åˆæˆä¸€ä¸ªtupleï¼Œç„¶åä½¿ç”¨collectè¿”å›ä¸€ä¸ªé›†åˆï¼Œcollectå¯ä»¥è¿”å›å¾ˆå¤šç±»å‹çš„é›†åˆï¼Œéœ€è¦åœ¨æ¥æ”¶çš„å˜é‡ä¸ŠæŒ‡åç±»å‹ã€‚
}
```

### hashmapå’Œæ‰€æœ‰æƒ

å¯¹äºå®ç°äº†copy trait çš„ç±»å‹å¦‚i32ï¼Œå€¼ä¼šè¢«å¤åˆ¶åˆ°hashmapä¸­

å¯¹äºæ‹¥æœ‰æ‰€æœ‰æƒçš„å€¼å¦‚Stringï¼Œå€¼ä¼šè¢«ç§»åŠ¨ï¼Œæ‰€æœ‰å…¨ä¼šè½¬ç§»ç»™hashmap

å¦‚æœå°†å€¼çš„å¼•ç”¨æ’å…¥åˆ°hashmapï¼Œå€¼æœ¬èº«ä¸ä¼šç§»åŠ¨

```rust
use std::collections::HashMap;

fn main() {
    let field_name = String::from("favourite color");
    let field_value = String::from("bule");

    let mut map = HashMap::new();
    map.insert(field_name, field_value);  // æ‰€æœ‰æƒå‘ç”Ÿäº†ç§»åŠ¨ï¼Œæˆ‘ä»¬ä¸èƒ½å†åœ¨ä¹‹åä½¿ç”¨ä»–ä»¬
    println!("{}:{}", field_name, field_value);
    
    map.insert(&field_name, &field_value);  // ä»…ä»…ä¼ é€’å¼•ç”¨ï¼Œä¸ä¼šäº§ç”Ÿæ‰€æœ‰æƒç§»åŠ¨
    println!("{}:{}", field_name, field_value);
}
```

ä½†æ˜¯  åœ¨**hashmapæœ‰æ•ˆçš„æœŸé—´**ï¼Œè¢«å¼•ç”¨çš„å€¼å¿…é¡»ä¿æŒæœ‰æ•ˆã€‚

### è®¿é—®hashmapä¸­çš„å€¼

getæ–¹æ³•

- å‚æ•°kï¼Œ è¿”å›ï¼šOption<&V>

- ```rust
  use std::collections::HashMap;
  
  fn main() {
      let mut scores = HashMap::new();
      scores.insert(String::from("yellow"), 10);
      scores.insert(String::from("blue"), 20);
  
      let team_name = String::from("blue");
      let score = scores.get(&team_name);
  
      match score {
          Some(s) => println!("{}", s),
          None => println!("team not exist"),
      }
  }
  ```



### éå†hashmap

ä½¿ç”¨forå¾ªç¯

````rust
fn main() {
    let mut scores = HashMap::new();

    scores.insert(String::from("blue"), 10);
    scores.insert(String::from("yellow"), 20);

    for (k, v) in &scores {
        println!("{}:{}", k,v);
    }
}
````

### æ›´æ–°hashmap<k, v>

- hashmapå¤§å°å¯å˜ï¼Œæ¯ä¸ªæ—¶åˆ»éƒ½å¯ä»¥æ”¹å˜ä»–çš„å¤§å°ã€‚
- ä½†æ˜¯æ¯ä¸ªkåŒæ—¶åªèƒ½å¯¹åº”ä¸€ä¸ªv

æ›´æ–°hashmapä¸­çš„æ•°æ®ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š

1. kå·²ç»å­˜åœ¨ï¼Œå¯¹åº”ä¸€ä¸ªV
   - æ›¿æ¢ç°æœ‰çš„v
   - ä¿ç•™ç°æœ‰çš„Vï¼Œå¿½ç•¥æ–°çš„V
   - åˆå¹¶ç°æœ‰çš„Vå’Œæ–°çš„V
2. kä¸å­˜åœ¨
   - æ·»åŠ ä¸€å¯¹k, v

```rust
fn main() {
    let mut scores = HashMap::new();

    scores.insert(String::from("blue"), 10);
    scores.insert(String::from("blue"), 25);  // æ›¿æ¢äº†åŸæœ‰çš„å€¼
    println!("{:?}", scores);

    scores.entry(String::from("blue")).or_insert(30); // ä½¿ç”¨entryåˆ¤æ–­æ˜¯å¦å­˜åœ¨blueè¿™ä¸ªé”®ã€‚è‹¥ä¸å­˜åœ¨åˆ™ä½¿ç”¨or_insertæ’å…¥

    let count = scores.entry(String::from("blue")).or_insert(0);
    *count += 5;  // è§£å¼•ç”¨è¿”å›å€¼ï¼Œä¿®æ”¹åŸæœ‰çš„å€¼

    println!("{:?}", scores);
}
```



`entry`æ–¹æ³•: æ£€æŸ¥æŒ‡å®šçš„kæ˜¯å¦å¯¹åº”ä¸€ä¸ªV

- å‚æ•°æ˜¯k
- è¿”å›enum Entryï¼šä»£è¡¨å€¼æ˜¯å¦å­˜åœ¨

`entry` çš„`or_insert()`æ–¹æ³•è¿”å›ï¼š

- å¦‚æœkå­˜åœ¨ï¼Œè¿”å›åˆ°å¯¹åº”çš„Vçš„ä¸€ä¸ªå¯å˜å¼•ç”¨ã€‚
- å¦‚æœkä¸å­˜åœ¨ï¼Œå°†æ–¹æ³•å‚æ•°ä½œä¸ºkçš„æ–°å€¼æ’è¿›å»ï¼Œè¿”å›åˆ°è¿™ä¸ªå€¼çš„å¯å˜å¼•ç”¨ã€‚





